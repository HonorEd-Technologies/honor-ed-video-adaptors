<!DOCTYPE html>
<html>
<head>
    <script src='/dist/main.js'></script>
</head>
<body>
    <div id='player-1'></div>
    <button onclick="play()">Play</button>
    <button onclick="pause()">Pause</button>
    <button onclick="getDuration()">Duration</button>
    <script>
        let search = window.location.search
        let urlParams = new URLSearchParams(search)
        let videoId = urlParams.get("videoId")
        let videoProvider = urlParams.get("provider")

        window.addEventListener('load', (event) => { 
            if (!videoId || !videoProvider) {
                document.getElementById('player-1').innerText = "Please pass in a video id"
            } else {
                let config = {
                    provider: videoProvider,
                    height: 400,
                    width: 600,
                    videoId,
                    autoplay: true,
                    controls: false,
                    fullscreenEnabled: false,
                    playsInline: false
                }
                const player = new HonorPlayer('player-1', config)
                window.HonorPlayer = player
                
                player.onReady(() => { 
                    console.log("Ready")
                })

                player.onStateChanged((state) => { 
                    console.log("State changed: " + state)
                })

                player.onError((error) => { 
                    console.log("Error: " + error)
                })

                player.onCurrentTimeChanged((time) => { 
                    console.log("Current time: " + time)
                })
            }
        })

        const play = () => { 
            window.HonorPlayer.playVideo()
                .then(() => console.log("playing video"))
        }

        const pause = () => { 
            window.HonorPlayer.pauseVideo()
                .then(() => console.log("paused video"))
        }

        const getDuration = () => { 
            window.HonorPlayer.getDuration()
                .then((duration) => console.log("duration: " + `${duration}`))
        }
    </script>
</body>
</html>